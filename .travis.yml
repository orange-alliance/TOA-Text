language: python
dist: xenial
python: "3.7"
sudo: false

jobs:
  include:
    - stage: test
      install: pip3 install twilio flask fuzzywuzzy requests firebase_admin
      script: echo "Temporary holding place until the test suite exists"
    - stage: deploy
      env: deploypoint = "text"
      install: false
      script: curl $DEPLOY_SCRIPT | bash
      after_success:
        - wget https://raw.githubusercontent.com/DiscordHooks/travis-ci-discord-webhook/master/send.sh
        - chmod +x send.sh
        - "./send.sh success $WEBHOOK_URL"

stages:
  - test
  - name: deploy
    if: type = push AND repo = orange-alliance/TOA-Text AND branch = master
